---
title: AEM站点
description: 从地图功能板在AEM Guides中创建并配置AEM站点预设。 使用AEM Sites支持生成基于文章的输出、发布链接的主题、conref，并在内容中搜索字符串。
feature: Publishing
role: User
exl-id: 641c98ca-b815-4176-abf5-a12c31ff4496
source-git-commit: ac83f613d87547fc7f6a18070545e40ad4963616
workflow-type: tm+mt
source-wordcount: '2404'
ht-degree: 0%

---

# 地图仪表板上的AEM Sites预设 {#id205BE3008SW}

您可以从地图仪表板创建AEM Sites预设，并将其配置为生成AEM Sites输出。


以下选项可用于AEM Sites输出：

| AEM Sites选项 | 描述 |
| --- | --- |
| 输出类型 | 要生成的输出类型。 要生成响应式AEM Sites输出，请选择AEM Sites选项。 |
| 设置名称 | 为您正在创建的AEM Sites设置提供一个描述性名称。 例如，您可以指定&#x200B;*内部客户输出*&#x200B;或&#x200B;*最终用户输出*。 |
| Site 名称 | 将输出存储在AEM存储库中的网站名称。<br><br>AEM存储库中的节点将使用此处指定的名称创建。 如果未指定站点名称，则使用DITA映射文件名创建站点节点。<br><br>您在此指定的网站名称也用作浏览器选项卡中的标题。<br><br>您还可以在设置网站名称时使用变量。 有关使用变量的更多详细信息，请参阅[使用变量设置目标路径、站点名称或文件名选项](generate-output-use-variables.md#id18BUG70K05Z)。 |
| 设计 | 选择要用于生成输出的设计模板。<br><br>有关如何使用自定义设计模板生成输出的详细信息，请与发布管理员联系。 |
| 目标路径 | AEM存储库中存储输出的路径。 在生成最终输出时，站点名称和目标路径是组合在一起的。 例如，如果您将站点名称指定为`user-guide`，将目标路径指定为`/content/output/aem-guides`，则最终输出将在`/content/output/aem-guides/user-guide`节点下生成。<br><br>您还可以在设置目标路径时使用变量。 有关使用变量的更多详细信息，请参阅[使用变量设置目标路径、站点名称或文件名选项](generate-output-use-variables.md#id18BUG70K05Z)。 |
| 使用以下方式应用条件 | 选择以下选项之一：<br><br>**未应用**：如果不想对已发布的输出应用任何条件，请选择此选项。<br>**DITAVal文件**：选择DITAVal文件以生成条件化内容。 可使用浏览对话框或键入文件路径来选择多个DITAVal文件。 使用文件名旁边的交叉图标可将其删除。 DITAVal文件将按指定的顺序进行计算，因此第一个文件中指定的条件优先于后续文件中指定的匹配条件。 您可以通过添加或删除文件来维护文件顺序。 如果将DITAVal文件移动到其他位置或将其删除，则不会从映射操控板中自动将其删除。 如果移动或删除了文件，则需要更新位置。 您可以将鼠标悬停在文件名上以查看存储该文件的AEM存储库中的路径。 您只能选择DITAVal文件，如果选择了任何其他文件类型，则会显示错误。<br>**条件预设**：从下拉列表中选择条件预设，以在发布输出时应用条件。 如果为DITA映射文件添加了条件，则此选项可见。 条件设置在DITA映射控制台的条件预设选项卡中可用。 要了解有关条件预设的更多信息，请参阅[使用条件预设](generate-output-use-condition-presets.md#id1825FL004PN)。 |
| 现有输出页面 | 选择&#x200B;**覆盖内容**&#x200B;选项可覆盖现有页面中的内容。 此选项仅覆盖页面内容和标题节点下存在的内容。 此选项允许混合发布内容。 选择此选项将提供一个选项，用于从已发布的输出中选择删除孤立页面。 这也是用于创建AEM Sites输出的&#x200B;*默认*&#x200B;选项。<br><br>选择&#x200B;**删除并创建**&#x200B;选项以在发布期间强制删除任何现有页面。 此选项会删除页面节点及其内容和其下的所有子页面。 如果您已更改输出预设的设计模板，或者希望删除目标中已存在的任何额外页面，请使用此选项。 |
| 删除孤立站点页面 | 在&#x200B;**现有输出页面**&#x200B;设置中选择&#x200B;**覆盖内容**&#x200B;将显示此选项。 如果选择此选项，则会从已发布的AEM站点中删除所有孤立页面。 要使此功能成功运行，必须发布整个DITA映射，而不使用增量发布。<br><br>假设您已发布一个DITA映射，其中包含主题a.dita、b.dita和c.dita。 再次发布映射之前，您已从映射中删除了b.dita主题。 现在，如果您选择了此选项，则与b.dita相关的所有内容都将从AEM Sites输出中删除，并且仅发布a.dita和c.dita。<br><br>此功能不会删除任何已发布的子映射。 例如，如果父映射包含子映射，并且您删除了整个子映射，则子映射内容不会从已发布的输出中删除。 但是，如果您从子映射中删除任何主题并重新发布，则已删除主题的内容将从站点输出中删除。<br><br>此外，如果存在任何引用的内容，且在重新发布之前已移除该内容，则不会移除引用内容的数据。<br><br>**注意**：输出生成日志中还捕获了有关已删除孤立页面的信息。 有关访问日志文件的详细信息，请参阅[查看并检查日志文件](generate-output-basic-troubleshooting.md#id1821I0Y0G0A__id1822G0P0CHS)。 |
| 保留临时文件 | 选择此选项可保留由DITA-OT生成的临时文件。 如果在通过DITA-OT生成输出时遇到错误，请选择此选项以保留临时文件。 然后，您可以使用这些文件来排查输出生成错误。<br> <br>生成输出后，选择&#x200B;**下载临时文件** ![下载临时文件图标](images/download-temp-files-icon.png)图标以下载包含临时文件的ZIP文件夹。<br><br> **注意**：如果在生成期间添加文件属性，则输出临时文件还包括包含这些属性的&#x200B;*metadata.xml*&#x200B;文件。 |
| 为每个主题生成单独的PDF | 如果选中，还将为DITA映射中的每个主题创建PDF。 选择此选项时，将显示一个新的拆分PDF路径选项。<br><br>在“拆分PDF路径”字段中，指定用于存储为每个主题生成的PDF的路径。<br><br>**注意**： AEM Guides使用名为pdfx的DITA-OT插件为每个主题生成PDF。 此插件与现成提供的DITA-OT软件包捆绑在一起。 您可以自定义此插件，以根据自己的要求生成PDF。 如果使用自定义DITA-OT插件，请确保集成pdfx插件以具有主题级别的PDF生成功能。 |
| 运行后期生成工作流 | 选择此选项时，将显示一个新的生成后工作流下拉列表，其中包含在AEM中配置的所有工作流。 必须选择要在输出生成工作流完成后执行的工作流。 |
| 使用基线 | 如果已为所选DITA映射创建了基线，请选择此选项以指定要发布的版本。<br><br>**重要信息**：当您为AEM站点生成增量输出时，将使用当前版本的文件而不是附加的基线创建输出。<br><br>有关更多详细信息，请参阅[使用基线](generate-output-use-baseline-for-publishing.md#id1825FI0J0PF)。 |
| 属性 | 选择要作为元数据处理的属性。 这些属性是从DITA映射或书签文件的属性页面设置的。 您从下拉列表中选择的属性显示在&#x200B;**文件属性**&#x200B;字段下。 选择资产旁边的交叉图标以将其删除。 <br><br>**注意**：元数据属性区分大小写。<br><br>*如果已选择基线，则属性的值将基于所选基线的版本。<br>*&#x200B;如果您未选择基线，则属性的值将基于最新版本。<br><br>您还可以使用DITA-OT发布将元数据传递到输出。 有关更多详细信息，请参阅[使用DITA-OT将元数据传递到输出](pass-metadata-dita-ot.md#id21BJ00QD0XA)。<br><br>**注意**：如果您尚未在“属性”选项中定义`cq:tags`，那么即使您选择了基线进行发布，也会从当前工作副本中提取`cq:tags`的值。 |
| 使用映射属性作为默认值 | 如果选中，为映射文件定义的属性也会复制到未定义此类属性的主题中。 使用此选项时，请考虑以下几点：<br><br>*只能将String、Date或Long（单值和多值）属性传递到AEM Sites页面。<br>*&#x200B;字符串类型属性的元数据值不支持任何特殊字符（如`@, #, " "`）。<br>*此选项应与`Properties`选项一起使用。 |

## 关于AEM Sites的其他说明

### 从映射控制台生成基于文章的输出

您可以从“映射”控制台为一个或多个主题或整个DITA映射生成AEM Sites输出。 您需要为DITA映射创建输出预设，然后可以轻松为映射生成AEM Sites输出。 如果您更新了地图中的几个主题，则还可以从“地图”控制台中仅为这些主题生成AEM Sites输出。 有关详细信息，请查看[生成知识库输出](web-editor-article-publishing.md#id218CK0U019I)。

### 从其他映射生成链接主题的输出

一种非常常见的情形是，将大量文档分布在多个文件夹和DITA映射中。 发布从不同位置链接的内容变得极其复杂。 默认情况下，使用`local` `@scope`创建所有链接`<xref>`。 发布此类主题并不涉及任何挑战，因为它使用直接链接到该主题。 如果主题位于当前DITA映射之外，则该链接不会显示链接的内容。

链接内容的另一种方法是使用`peer` `@scope`创建链接。 对于此类内容，在运行时通过从DITA映射的发布上下文中选取文件的标题和链接主题的已配置上下文来解析链接。 以下屏幕截图显示了具有`peer` `@scope`的链接的“属性”面板：

![](images/peer-link-scope-link-new.png){align="left"}

为了简化复杂映射和链接到其他映射中其他主题的主题的发布工作，Adobe Experience Manager Guides允许您为每个输出预设设置发布上下文。

发布上下文允许您指定必须使用哪个主题来发布特定输出。 让我们通过一个示例来了解这一点 — 假设您有四个文件夹：示例a、示例b、示例c和示例d。每个文件夹都包含一个DITA映射 — DITA映射A、DITA映射B、DITA映射C和DITA映射D。当DITA映射A中的主题链接到DITA映射B、C或D中的主题时，将发生交叉映射链接。在以下屏幕截图中，示例概念主题包含指向属于其他DITA映射一部分的文件的链接\（或引用\）。

![](images/sample-concept-link-to-other.png){width="350" align="left"}

现在，在为包含此主题的映射文件配置AEM Sites发布设置时，您可以选择在发布时用于链接内容的发布上下文。 发布上下文是DITA映射及其输出预设的组合。 输出预设又包含特定版本的内容和条件预设。 DITA映射、输出预设、\(files\)版本和条件的整个组合定义了链接映射的发布上下文。

执行以下步骤可指定交叉链接文件的发布上下文：

1. 打开要发布的DITA映射的&#x200B;**输出预设**&#x200B;选项卡。

1. 选择&#x200B;**AEM Site**&#x200B;输出预设。

   您会获得“AEM预设设置”和“发布上下文”选项卡。

   ![](images/aem-site-publish-settings.png){align="left"}

1. 打开&#x200B;**发布上下文**&#x200B;选项卡。

   您会看到一个依赖主题的列表。 这些是从当前映射中的某个主题链接的主题，但它们在其他一些DITA映射中可用。

   >[!NOTE]
   >
   > 发布上下文选项卡仅显示使用`peer` `@scope`链接的主题。 对于具有`local` `@scope`的链接，无需指定发布上下文。

   默认情况下，已选择所有链接的主题的最新输出预设和映射。

   ![](images/default-publish-context.png){align="left"}

1. 要更改DITA映射和预设的默认选择，请选择&#x200B;**编辑** \（在主工具栏中\）。

1. 如果要使用映射中每个依赖文件的最近发布的输出，请选择&#x200B;**为所有依赖主题使用最近生成的发布上下文**。

1. 在&#x200B;**父映射**&#x200B;下拉列表中，选择要为其输出链接当前映射输出的映射文件。

   选择映射文件时，映射的UUID会显示在父映射UUID列中。 与所选映射关联的输出预设将在父映射的预设列表中列出。

1. 在&#x200B;**父映射的预设**&#x200B;下拉列表中，选择要与当前映射的输出链接的输出预设。

1. 为所有相关主题选择所需的映射及其输出预设，然后选择&#x200B;**完成**。

   现已设置相关主题的上下文。 可以为当前映射生成输出。 有关生成输出的详细信息，请从映射控制台[&#128279;](generate-output-for-a-dita-map.md#)中查看生成DITA映射的输出。

### 混合发布

AEM Guides支持在现有AEM站点中发布DITA内容。 例如，如果您现有站点，则可以使用AEM Sites输出仅发布该站点上的DITA内容。 在此流程中，发布流程不会修改现有的非DITA内容。 有关将站点设置为仅发布DITA内容的详细信息，请与发布管理员联系。

### 发布 `conref`

如果您在内容中使用`conref`，则它作为普通内容或嵌入内容与源\（或反向链接\）主题中的内容一起发布。 `conref`内容将与主内容一起呈现，并且不会为同一内容创建单独的站点页面。 当您搜索`conref`中引用的内容时，搜索结果中仅显示包含`conref`内容的主主题或页面。

>[!NOTE]
>
>如果您使用AEM Guides版本3.5或更早版本为`conref`内容生成了单独的页面，则建议使用[删除孤立的网站页面](#delete-orphan-page-aem-site)选项来清除/删除这些页面。


### 搜索内容中的字符串

您可以在AEM Sites输出中搜索字符串。 默认情况下，您只能在标题中搜索字符串。 要在AEM Sites输出的内容或正文中搜索字符串，请联系您的系统管理员以启用flattening.enabled属性。

![搜索AEM Sites输出](images/aem-output-search.png){width="650" align="left"}

有关更多详细信息，请查看《安装和配置AEM指南》中的&#x200B;*配置Adobe Experience Manager Guides站点节点结构的扁平化*&#x200B;部分。

**父主题：**&#x200B;[&#x200B;了解输出预设](generate-output-understand-presets.md)
